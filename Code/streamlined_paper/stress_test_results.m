function [h, g] = stress_test_results(DM,Tvec)

% Call the matrix generated for different traffic levels DM
% Define a limit LIM for infinite diameter.
% Assume the length of traffics is lT
k = length(Tvec);
plottingtable=zeros(k,4);

for i = 1:k
    
    [a,b] = effs(DM(:,:,i));
    [c,d] = diams(DM(:,:,i));
    
    e = [mean(a), mean(b), mean(c), mean(d)];
    
    plottingtable(i,:) = e;
    
end

plottingtable(plottingtable == Inf) = max(max(plottingtable(plottingtable(:,3) < Inf,:)))+5;
plottingtable(isnan(plottingtable)) = 0;

h = figure('Units', 'pixels', ...
    'Position', [100 100 500 375]);

hold on;

Data1 = plot(linspace(0,max(Tvec),k),plottingtable(:,1));
Data2 = plot(linspace(0,max(Tvec),k),plottingtable(:,2));

set(Data1                            , ...
  'LineStyle'       , '-'   , 'Color'           , [.2 .2 .2]  );

set(Data1                            , ...
  'LineWidth'       , 1           );

set(Data2                            , ...
  'LineStyle'       , '--'   , 'Color'           , [.1 .1 .1]  );

set(Data2                            , ...
  'LineWidth'       , 1           );


hTitle  = title ('Efficiency and heterogeneity vs flow demand');
hXLabel = xlabel('Demand'                     );
hYLabel = ylabel('Network performance '                      );

hLegend = legend( ...
  '\eta',...
  '\psi');
set(gcf,'color','w');
set( gca                       , ...
    'FontName'   , 'Helvetica' );

set([hTitle, hXLabel, hYLabel], ...
    'FontName'   , 'AvantGarde');
set([hLegend, gca]             , ...
    'FontSize'   , 8           );
set([hXLabel, hYLabel]  , ...
    'FontSize'   , 10          );
set( hTitle                    , ...
    'FontSize'   , 12          , ...
    'FontWeight' , 'bold'      );

set(gca, ...
  'Box'         , 'off'     , ...
  'TickDir'     , 'out'     , ...
  'TickLength'  , [.02 .02] , ...
  'XMinorTick'  , 'on'      , ...
  'YMinorTick'  , 'on'      , ...
  'YGrid'       , 'on'      , ...
  'XColor'      , [.3 .3 .3], ...
  'YColor'      , [.3 .3 .3], ...
  'YTick'       , 0:0.01:(max(plottingtable(:,1)) + 0.2), ...
  'LineWidth'   , 1         );


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%PLOT DIAMETERS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


g=figure('Units', 'pixels', ...
    'Position', [100 100 500 375]);

hold on;

Data1 = plot(linspace(0,max(Tvec),k),plottingtable(:,3));
Data2 = plot(linspace(0,max(Tvec),k),plottingtable(:,4));

set(Data1                            , ...
  'LineStyle'       , '-'   , 'Color'           , [.2 .2 .2]  );

set(Data1                            , ...
  'LineWidth'       , 1           );

set(Data2                            , ...
  'LineStyle'       , '--'   , 'Color'           , [.1 .1 .1]  );

set(Data2                            , ...
  'LineWidth'       , 1           );


hTitle  = title ('Diameter and eccentricity vs flow demand');
hXLabel = xlabel('Flow Demand'                     );
hYLabel = ylabel('Network performance'                      );

hLegend = legend( ...
  '\delta',...
  '\zeta');
set(gcf,'color','w');
set( gca                       , ...
    'FontName'   , 'Helvetica' );

set([hTitle, hXLabel, hYLabel], ...
    'FontName'   , 'AvantGarde');
set([hLegend, gca]             , ...
    'FontSize'   , 8           );
set([hXLabel, hYLabel]  , ...
    'FontSize'   , 10          );
set( hTitle                    , ...
    'FontSize'   , 12          , ...
    'FontWeight' , 'bold'      );

set(gca, ...
  'Box'         , 'off'     , ...
  'TickDir'     , 'out'     , ...
  'TickLength'  , [.02 .02] , ...
  'XMinorTick'  , 'on'      , ...
  'YMinorTick'  , 'on'      , ...
  'YGrid'       , 'on'      , ...
  'XColor'      , [.3 .3 .3], ...
  'YColor'      , [.3 .3 .3], ...
  'YTick'       , 0:2:(max(plottingtable(:,3)) + 0.2), ...
  'LineWidth'   , 1         );

end